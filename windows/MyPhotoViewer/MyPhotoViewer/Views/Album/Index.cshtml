@using MyPhotoViewer.DAL
@model PhotoAlbum

@{
    ViewBag.Title = Model.Title;
}

<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">&lsaquo;</a>
    <a class="next">&rsaquo;</a>
    <a class="close">&times;</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>

<div id="links">
    @Photos(Model)
</div>

@helper Photos(PhotoAlbum photoAlbum)
{
IEnumerator<Photo> photoEnumerator = photoAlbum.Photos.GetEnumerator();
while (photoEnumerator.MoveNext())
{
        <div class="row row-grid">
            @Photo(photoEnumerator.Current)
            @PhotoOrEmpty(photoEnumerator)
            @PhotoOrEmpty(photoEnumerator)
        </div>
}
}

@helper Photo(Photo photo)
{
    <div class="col-md-4">
        @Html.Partial("PhotoThumbnail", photo)
    </div>
}

@helper PhotoOrEmpty(IEnumerator<Photo> photoEnumerator)
{
if (photoEnumerator.MoveNext())
{
        @Photo(photoEnumerator.Current)
}
}

@section scripts {
    <script>
    $(document).ready(function() {
        $('img').unveil();

        $('#links').click(function (event) {
            var target = event.target,
                link = target.src ? target.parentNode : target,
                options = { index: link, event: event.originalEvent },
                links = $(this).find('a').get();
            blueimp.Gallery(links, options);
        });
    })
    </script>
}
